**世上无难事，只怕有心人！！！**

# 第十二部分：MySQL实战性能优化

## MySQL性能优化



### MySQL架构与执行流程原理



#### SQL 语句是如何执行的

#### 内置查询缓存

#### 语法和词法解析

#### 语义处理器

#### 优化器/执行计划

#### 查询执行引擎

#### InnoDb内存结构和磁盘结构



#### 缓冲器设计

##### 缓存区 Buffer Pool 作用

##### 内存缓冲器满了，如何处理？

##### 如何配置你的Buffer Pool的大小？

##### MySQL延迟问题和数据刷盘策略

##### 如何理解MySQL中抽象出来的数据页单位

##### 磁盘上的数据页和缓存页是如何对应起来的

##### 缓存页对应的描述信息是什么？



##### 如何基于机器配置来合理设置Buffer Pool

###### 生产环境中应该给buffer pool设置多少内存

###### 总大小=(chunk大小 * buffer pool数量)的2倍数



#### MySQL底层通信协议原理



##### linux

###### TCP/IP套接字

###### mysql报文

###### 三次握手认证

###### Unix套接字



##### windows

###### 命名管道

###### 内存共享



#### MySQL底层模块划分

##### 初始化模块

##### 核心API

##### 网络交互模块

##### Client & Server 交互协议模块

##### 用户模块

##### 访问控制模块

##### 连接管理、连接线程和线程管理

##### Query 解析和转发模块

##### Query 优化器模块

##### 日志记录模块

##### 存储引擎接口模块



### MySQL索引底层实现原理



#### 索引的数据结构模型

##### hash表

##### 二叉搜索树

##### 红黑树

##### 平衡多叉搜索树

##### B+ Trees



#### 索引有那些分类

##### 全文索引

##### 主键索引

##### 组合索引

##### 唯一索引

#### innodb和myisam的区别 索引的差异

#### MySQL索引建立和使用的基本原则



### MySQL事务底层原理

#### Spring声明与编程事务区别

#### 事务只begin，不commit/rollback会发生那些问题

#### mysql 多版本控制MVCC原理



#### MySQL事务隔离级别

##### 可重复读

##### 读提交

##### 读未提交

##### 串行化



#### MySQL加锁与释放锁原理

##### 行锁、表锁、页锁

##### 悲观锁/乐观锁



##### Gap Lock

###### 什么叫间隙锁

###### 为什么说gap锁是RR隔离级别下防止幻读的主要原因

###### 主键索引/唯一索引+当前读会加上Gap锁吗？

###### 通过范围查询是否会加上Gap锁

###### 检索条件并不存在的当前读会加上Gap吗？



##### 死锁分析原理

###### Two-Phase Locking

###### 为什么会发生死锁



### MySQLUndo日志底层原理

#### Undo-log与Redo-log区别

#### UndoLog实现事务原子性原理

#### RedoLog实现事务持久性原理



### MySQL实战性能优化



#### SQL慢查询分析与解决方案

##### 如何开启MySQL慢查询



#### 执行计划explain原理解读

##### id:列越大执行优先级越高，id相同则从上往下执行，id为NULL最后执

##### select_type:表示查询的类型

##### table:explain 的一行正在访问哪个表。



##### type列

###### system

###### const

###### eq_ref

###### ref

###### range 

###### index

###### ALL

##### Extra表示附加信息



#### SQL与索引优化的原则

##### 遵循最佳左前缀法则防止索引失效

##### 尽量使用覆盖索引，避兔回表查询

##### 排序遵循最佳左前缀法避免filesort

##### type最低 满足 range 范围查询级别

##### 分页优化 where id 条件过滤offSet或者子查询定位id关联

##### 连表查询优化小表驱动大表数据，超过三张表禁止使用 join

##### Like 模糊遵循最佳左前缀法则 或者使用使用复合索引模糊查询

#### MySQL配置优化原理

#### 存储引擎与表结构优化

#### 阿里巴巴开发手册角度优化MySQL



## MySQL分表分库

### 单表达到多大量开始分表分库

### 水平与垂直拆分区别



### 分表分库策略



#### 取余/范围取模

#### 按照范围分片

#### 按照日期进行分片

#### 按照月份进行分片

#### 按照枚举值分片

#### 二进制取模范围分片

#### 一致性hash分片

#### 按照目标字段前缀指定的进行分区

#### 按照前缀ASCII码和值进行取模范围分片

#### 开发者自定义



### 常见问题

#### 分表分库后查询存在那些优缺点

#### 分表分库后如何实现分页查询

#### 分表分库后如何实现连表查询

#### 为什么不推荐使用MyCat